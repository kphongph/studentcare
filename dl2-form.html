<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-stepper/paper-stepper.html">
<link rel="import" href="../paper-stepper/paper-step.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="./local/dl-profile.html">

<!--
`dl2-form`
Polymer Component for StudentCare project

@demo demo/dl2-form.html 
-->

<dom-module id="dl2-form">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        @apply(--layout-vertical);
        display: block;
      }
      #visualResponsiveWidth {
        width: 500px;
        max-width: 100%;
        height: 4px;
        background: var(--primary-color);
      }
      #responsiveStepper {
        --paper-stepper-vertical-responsive-width: 500px;
      }      
    </style>
   
    <paper-stepper id="responsiveStepper" responsive-check-frequence="600"
      on-paper-stepper-completed="_completed">
      <paper-step label="{{localize('dl1_section1_label')}}">
        <dl-profile 
          dmc-student="{{dmcStudent}}">
        </dl-profile>
      </paper-step>
      <paper-step label="xxxxx">
        <sdq-form-choice value="{{formArray}}" on-update="_fieldChanged"></sdq-form-choice>
      </paper-step>
      <paper-step label="yyyyyy">
        <sdq-form-teacher></sdq-form-teacher>
      </paper-step>
    </paper-stepper>
    
  </template>

  <script>
    Polymer({
      is: 'dl2-form',
      behaviors: [
          Polymer.AppLocalizeBehavior
      ],
      properties: {
        language: {
          value:'th'
        },
        dmcStudent: {
          type: Object,
          observer:'_studentChanged'
        }
      },
      _studentChanged: function(n,o) {        
        if(n) {
          console.log(n);
        }
      },
      attached: function() {
        this.loadResources(this.resolveUrl('locales.json'));
      },
      _formArrayChanged: function(n,o) {
        console.log(n);
      },
      _fieldChanged:function(e) {        
        console.log(this.formArray);
      },
      _completed:function(e) {
        var obj = {'student':this.dmcStudent,'choice':this.formArray};
        console.log(obj)
        this.fire('dl2-completed',obj);
      }
    });
  </script>
</dom-module>
