<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../../paper-listbox/paper-listbox.html">
<link rel="import" href="../../paper-item/paper-item.html">
<link rel="import" href="../../paper-styles/color.html">
<link rel="import" href="../../iron-selector/iron-selector.html">
<link rel="import" href="dl-profile.html">
<link rel="import" href="../dl2-form.html">
<link rel="import" href="form-card.html">

<link rel="import" href="../../neon-animation/neon-animated-pages.html">
<link rel="import" href="../../neon-animation/neon-animatable.html">
<link rel="import" href="../../neon-animation/neon-animations.html">

<dom-module id="form-list">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        overflow: hidden;
        @apply(--layout-vertical);
      }

      neon-animated-pages {
        @apply(--layout-flex);
        overflow:auto;
      }

    </style>
    <dl-profile dmc-student="{{dmcStudent.value}}"></dl-profile>

    <iron-selector on-iron-select="_select" selected="{{selected}}">
     <form-card label="dl2_form_label" dmc-student="{{dmcStudent}}">
     </form-card>
    </iron-selector>

    <neon-animated-pages id="pages" selected="{{selected}}"
      entry-animation="[[entryAnimation]]" 
      exit-animation="[[exitAnimation]]">
      <dl2-form dmc-student="{{dmcStudent.value}}"></dl2-form>
    </neon-animated-pages>

  </template>

  <script>
    Polymer({
      is: 'form-list',
      behaviors: [
          Polymer.AppLocalizeBehavior
      ],
      properties: {
        language: {
          value:'th'
        },
        selected: {
          type:Number,
        },
        dmcStudent: {
          type: Object,
          observer:'_studentChanged'
        }
      },
      attached:function() {
        this.loadResources(this.resolveUrl('../locales.json'));
      },
      _studentChanged:function(student) {
        if(student.value.IDNO) {
          this.set('selected',-1);
        }
      },
      _select: function() {
        //this.entryAnimation = 'scale-up-animation';
        //this.exitAnimation = 'scale-down-animation';
      }
    });
  </script>
</dom-module>
