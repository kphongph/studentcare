<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../iron-pages/iron-pages.html">
<link rel="import" href="../../app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../../paper-listbox/paper-listbox.html">
<link rel="import" href="../../paper-item/paper-item.html">
<link rel="import" href="../../paper-dialog/paper-dialog.html">
<link rel="import" href="../../paper-button/paper-button.html">
<link rel="import" href="../../paper-styles/color.html">
<link rel="import" href="dl-profile.html">
<link rel="import" href="../dl2-form.html">
<link rel="import" href="form-card.html">

<dom-module id="form-list">
  <template>
    <style include="iron-flex iron-flex-alignment">
      :host {
        overflow: hidden;
        @apply(--layout-vertical);
      }

    </style>
    <dl-profile dmc-student="{{dmcStudent.value}}"></dl-profile>


    <iron-selector selected="{{page}}">
     <form-card label="dl2_form_label" 
       dmc-student="{{dmcStudent}}">
     </form-card>
    </iron-selector>

    <iron-pages selected="{{page}}">
      <dl2-form dmc-student="{{dmcStudent.value}}"></dl2-form>
    </iron-pages>

  </template>

  <script>
    Polymer({
      is: 'form-list',
      behaviors: [
          Polymer.AppLocalizeBehavior
      ],
      properties: {
        language: {
          value:'th'
        },
        selected: {
          type:Number,
        },
        page:{
          type:Number,
          value:-1,
          observer:'_pageChanged'
        },
        dmcStudent: {
          type: Object,
          observer:'_studentChanged'
        }
      },
      attached:function() {
        this.loadResources(this.resolveUrl('../locales.json'));
      },
      _studentChanged:function(student) {
        if(student.value.IDNO) {
          this.set('page',-1);
        }
      },
      _select: function() {
        //this.entryAnimation = 'scale-up-animation';
        //this.exitAnimation = 'scale-down-animation';
      },
      _pageChanged:function(n) {
        console.log('page',n);
      }
    });
  </script>
</dom-module>
